<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงุณุชุนุงุฏุฉ ูููุฉ ุงููุฑูุฑ - ุงูููุตุฉ ุงูุทุจูุฉ</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/auth.css">
    <link rel="stylesheet" href="css/lang.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- ุดุฑูุท ุงูุชููู -->
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="logo">
                <i class="fas fa-stethoscope"></i>
                <span data-i18n="head-name">ุงูููุตุฉ ุงูุทุจูุฉ</span>
            </a>

            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>

            <ul class="nav-links" id="navLinks">
                <li><a href="index.html" data-i18n="nav_home" class="active"><i class="fas fa-home"></i> ุงูุฑุฆูุณูุฉ</a>
                </li>
                <li><a href="about.html" data-i18n="nav_about"><i class="fas fa-info-circle"></i> ุนู ุงูููุตุฉ</a></li>
                <li><a href="services.html" data-i18n="nav_services"><i class="fas fa-concierge-bell"></i> ุงูุฎุฏูุงุช</a>
                </li>
                <li><a href="contact.html" data-i18n="nav_contact"><i class="fas fa-envelope"></i> ุงุชุตู ุจูุง</a></li>
                <li><a href="login.html" class="btn-login" data-i18n="nav_login"><i class="fas fa-sign-in-alt"></i>
                        ุชุณุฌูู ุงูุฏุฎูู</a></li>
            </ul>
            <div class="lang-dropdown">
                <button class="lang-btn">
                    ๐ <span id="current-lang">AR</span>
                    <i class="fas fa-chevron-down"></i>
                </button>

                <ul class="lang-menu">
                    <li onclick="setLanguage('ar')">๐ช๐ฌ ุงูุนุฑุจูุฉ</li>
                    <li onclick="setLanguage('en')">๐บ๐ธ English</li>
                    <li onclick="setLanguage('fr')">๐ซ๐ท Franรงais</li>
                </ul>
            </div>


        </div>
    </nav>


    <!-- ูุณู ุงุณุชุนุงุฏุฉ ูููุฉ ุงููุฑูุฑ -->
    <section class="auth-section">
        <div class="container">
            <div class="auth-container">
                <div class="auth-header">
                    <h1 data-i18n="forgot-password-title">ุงุณุชุนุงุฏุฉ ูููุฉ ุงููุฑูุฑ</h1>
                    <p data-i18n="forgot-password-subtitle">
                        ุฃุฏุฎู ุจุฑูุฏู ุงูุฅููุชุฑููู ูุฅุฑุณุงู ุฑุงุจุท ุงุณุชุนุงุฏุฉ ูููุฉ ุงููุฑูุฑ
                    </p>
                </div>

                <form id="forgotPasswordForm" class="auth-form">
                    <div class="form-group">
                        <label for="resetEmail" data-i18n="email-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู *</label>
                        <div class="input-with-icon">
                            <i class="fas fa-envelope"></i>
                            <input type="email" id="resetEmail" required data-i18n-placeholder="email-placeholder"
                                placeholder="ุฃุฏุฎู ุจุฑูุฏู ุงูุฅููุชุฑููู ุงููุณุฌู">
                        </div>
                        <div class="error-message" id="emailError"></div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-block" id="resetBtn">
                        <span id="resetText" data-i18n="reset-btn">ุฅุฑุณุงู ุฑุงุจุท ุงูุงุณุชุนุงุฏุฉ</span>
                        <div class="spinner hidden" id="resetSpinner"></div>
                    </button>

                    <div class="auth-divider">
                        <span data-i18n="divider-text">ุฃู</span>
                    </div>

                    <div class="additional-options">
                        <a href="login.html" class="btn btn-secondary btn-block">
                            <i class="fas fa-arrow-right"></i> <span data-i18n="back-login-btn">ุงูุนูุฏุฉ ูุชุณุฌูู
                                ุงูุฏุฎูู</span>
                        </a>
                    </div>
                </form>

                <div class="auth-footer">
                    <p data-i18n="no-account-text">
                        ูุง ุชููู ุญุณุงุจุงูุ <a href="register.html">ุฃูุดุฆ ุญุณุงุจ ุฌุฏูุฏ</a>
                    </p>
                    <p>
                        <a href="index.html"><i class="fas fa-arrow-right"></i>
                            <span data-i18n="back-home-text">ุงูุนูุฏุฉ ููุตูุญุฉ ุงูุฑุฆูุณูุฉ</span>
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- ุงูููุชุฑ -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>ยฉ ุงูููุตุฉ ุงูุทุจูุฉ.</p>
                <p>ยฉ 2026 Designed By Emad Multimedia</p>
            </div>
        </div>
    </footer>

    <!-- ูุงูุฐุฉ ุงูุชุฃููุฏ -->
    <div class="modal" id="resetModal">
        <div class="modal-content">
            <div class="modal-body text-center">
                <div class="success-icon">
                    <i class="fas fa-paper-plane"></i>
                </div>
                <h3 data-i18n="reset-modal-title">ุชู ุฅุฑุณุงู ุฑุงุจุท ุงูุงุณุชุนุงุฏุฉ!</h3>
                <p id="resetMessage" data-i18n="reset-modal-message">
                    ุชู ุฅุฑุณุงู ุฑุงุจุท ุงุณุชุนุงุฏุฉ ูููุฉ ุงููุฑูุฑ ุฅูู ุจุฑูุฏู ุงูุฅููุชุฑููู. ูุฑุฌู ุงูุชุญูู ูู ุตูุฏูู ุงููุงุฑุฏ ููุชุงุจุนุฉ
                    ุงูุชุนูููุงุช.
                </p>
                <div class="modal-actions">
                    <button class="btn btn-primary" onclick="closeResetModal()">
                        <span data-i18n="reset-modal-ok"><i class="fas fa-check"></i> ุญุณูุงู</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- ูุต ุงูููุฏุงู -->
    <p id="resetMessage" data-i18n="reset-modal-message"></p>

    <!-- ุฒุฑ ุงูุฅุฑุณุงู -->
    <span id="resetText" data-i18n="reset-btn"></span>

    <!-- placeholder ููุฅูููู -->
    <input type="email" id="resetEmail" required data-i18n-placeholder="email-placeholder" placeholder="">


    <script src="js/auth.js"></script>
    <script>
        // ุชููุฆุฉ ุงูุตูุญุฉ
        document.addEventListener('DOMContentLoaded', function () {
            const menuToggle = document.getElementById('menuToggle');
            const navLinks = document.getElementById('navLinks');

            if (menuToggle && navLinks) {
                menuToggle.addEventListener('click', function () {
                    navLinks.classList.toggle('active');
                    menuToggle.innerHTML = navLinks.classList.contains('active')
                        ? '<i class="fas fa-times"></i>'
                        : '<i class="fas fa-bars"></i>';
                });
            }

            // ูุนุงูุฌุฉ ุงุณุชุนุงุฏุฉ ูููุฉ ุงููุฑูุฑ
            const forgotPasswordForm = document.getElementById('forgotPasswordForm');
            const resetBtn = document.getElementById('resetBtn');
            const resetText = document.getElementById('resetText');
            const resetSpinner = document.getElementById('resetSpinner');

            if (forgotPasswordForm && resetBtn) {
                forgotPasswordForm.addEventListener('submit', async function (e) {
                    e.preventDefault();

                    const email = document.getElementById('resetEmail').value.trim();

                    if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                        document.getElementById('emailError').textContent = 'ุงูุฑุฌุงุก ุฅุฏุฎุงู ุจุฑูุฏ ุฅููุชุฑููู ุตุญูุญ';
                        return;
                    }

                    // ุงูุชุญูู ูู ูุฌูุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
                    const users = JSON.parse(localStorage.getItem('medicalPlatformUsers') || '[]');
                    const userExists = users.some(user => user.email === email);

                    if (!userExists) {
                        document.getElementById('emailError').textContent = 'ูุฐุง ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ูุณุฌู';
                        return;
                    }

                    // ุนุฑุถ ุญุงูุฉ ุงูุชุญููู
                    resetBtn.disabled = true;
                    resetText.style.display = 'none';
                    resetSpinner.classList.remove('hidden');

                    try {
                        // ูุญุงูุงุฉ ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
                        await new Promise(resolve => setTimeout(resolve, 1500));

                        // ุฅุธูุงุฑ ูุงูุฐุฉ ุงููุฌุงุญ
                        showResetModal(email);

                    } catch (error) {
                        showNotification('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅุฑุณุงู ุฑุงุจุท ุงูุงุณุชุนุงุฏุฉ', 'error');
                    } finally {
                        // ุฅุนุงุฏุฉ ุชูุนูู ุงูุฒุฑ
                        resetBtn.disabled = false;
                        resetText.style.display = 'block';
                        resetSpinner.classList.add('hidden');
                    }
                });
            }
        });

        // ุฅุธูุงุฑ ูุงูุฐุฉ ุงุณุชุนุงุฏุฉ ูููุฉ ุงููุฑูุฑ
        function showResetModal(email) {
            const modal = document.getElementById('resetModal');
            const message = document.getElementById('resetMessage');

            if (modal && message) {

                let translatedText = translations[currentLang]["reset-modal-message"];
                translatedText = translatedText.replace("{{email}}", email);

                message.textContent = translatedText;

                modal.style.display = 'flex';
                setTimeout(() => {
                    modal.classList.add('active');
                }, 10);
            }
        }

        function closeResetModal() {
            const modal = document.getElementById('resetModal');
            if (modal) {
                modal.classList.remove('active');
                setTimeout(() => {
                    modal.style.display = 'none';
                }, 300);
            }
        }


        // ุฅุธูุงุฑ ุฅุดุนุงุฑ
        function showNotification(message, type = 'info') {
            // ุฅุฒุงูุฉ ุฃู ุฅุดุนุงุฑุงุช ุณุงุจูุฉ
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }

            // ุฅูุดุงุก ุนูุตุฑ ุงูุฅุดุนุงุฑ
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <span>${message}</span>
                <button class="close-notification">&times;</button>
            `;

            // ุฅุถุงูุฉ ุงูุฅุดุนุงุฑ ุฅูู body
            document.body.appendChild(notification);

            // ุฅุถุงูุฉ ุฃููููุดู
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);

            // ุฅุนุฏุงุฏ ุฅุบูุงู ุงูุฅุดุนุงุฑ
            const closeBtn = notification.querySelector('.close-notification');
            closeBtn.addEventListener('click', () => {
                notification.classList.remove('show');
                setTimeout(() => {
                    notification.remove();
                }, 300);
            });

            // ุฅุฒุงูุฉ ุงูุฅุดุนุงุฑ ุชููุงุฆูุงู ุจุนุฏ 5 ุซูุงูู
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        notification.remove();
                    }, 300);
                }
            }, 5000);
        }
    </script>
    <script src="lang.js"></script>
</body>

</html>